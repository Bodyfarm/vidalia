<!--
  $Id$
  
  Vidalia is distributed under the following license:

  Copyright (C) 2006,  Matt Edman, Justin Hipple

  This program is free software; you can redistribute it and/or
  modify it under the terms of the GNU General Public License
  as published by the Free Software Foundation; either version 2
  of the License, or (at your option) any later version.

  This program is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  GNU General Public License for more details.

  You should have received a copy of the GNU General Public License
  along with this program; if not, write to the Free Software
  Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  
  02110-1301, USA.
-->

<html>
<body>

<h1>运行Tor服务器</h1>
<hr />

Tor网络由分布于世界各地的志愿者构建，他们通过运行服务器，
贡献自己的空余带宽。Vidalia协助您更容易地建立起自己的Tor服务器。
<a name="basic"/>
<h3>安装基础</h3>
<p>
如果您决定通过运行服务器来帮助Tor网络成长，可按如下步骤进行：
</p>
<ol>
  <li>
    通过托盘菜单选择<i>配置</i>(苹果机上是通过系统菜单栏的<i>属性</i>)，打开<i>配置对话框</i>；
  </li>
  <li>选择<i>服务器</i>配置页；</li>
  <li>勾选<i>为Tor网络中继传输</i>标签；
  <li>输入以下信息：
    <ul>
      <li><b>昵称</b>:
        
		在Tor网络中您服务器的名称，例如"张三的Vidalia服务器"。
      </li>
      <li><b>联系信息</b>:
		您的e-mail地址或者PGP key。仅当Tor由于安全原因需要升级或服务器出了问题，
		才可通过此方式与您联络。
      </li>
      <li><b>服务器端口：</b>:
		您服务器与客户端或其他服务器通信的侦听端口。
      </li>
      <li><b>地址</b>：
		输入您计算机的IP地址，因特网上其他Tor服务器通过此地址找到您的服务器。
		如果您不清楚自己的公共IP地址，可点击<i>获取地址</i>，Vidalia会联络外部站点
		(比如<i>http://www.vidalia-project.net/iptest/ip.php</i>)来找出您的公共IP地址。
      </li>
    </ul>
  <li>
	如果您想要为网络上的其他服务器做Tor目录镜像，请勾选<i>镜像服务器的目录</i>。
	如果您没有那么多带宽，则不要勾选此项。如果您决定做镜像目录，请确保其<i>端口</i>
	不同于上面输入的<i>服务器端口</i>。
  </li>
  <li>
	如果通信从您这里路由退出Tor网路，将显示您的IP地址。如果您不希望如此，请勾选
	<i>只进行其他Tor服务器之间的中继传输</i>，这样只扮演<i>中间人</i>的角色。
  </li>
</ol>

<a name="exitpolicy"/>
<h3>退出策略</h3>
<p>
有了退出策略，您就可以对自己的Tor服务器，设定退出时允许的通信类别。
Tor默认使用的退出策略，对信件做了限制，以防止垃圾邮件，
有的则针对共享文件的端口，以防止Tor网络被滥用。 <i>Note:</i> If you are
a <i>middle-man</i> server, you don't have to worry about exit policies; no
traffic is allowed to exit from your server at all.</p>

<p>
An exit policy is made up of zero or more lines, each one representing an
action to be taken if a connection leaving the Tor network from your
server matches the address or port specified in the policy. 
</p>

<p>
Policies are considered by Tor from first to last and Tor takes the action
associated with the first match it finds. Any policies you add will be added to
the beginning of Tor's list of default exit policies. Since policies are
considered from first to last, ordering is important. You can use the buttons
with the Up Arrow and the Down Arrow icons to reorder your list of policies.
</p>

<h4>Action</h4>
<p>
Each line in an exit policy has an action associated with it. The actions are:
<ul>
  <li><b>reject</b>: Connections matching this policy will be <i>rejected</i>.</li>
  <li><b>accept</b>: Connections matching this policy will be <i>accepted</i>.</li>
</ul>
</p>

<h4>Address</h4>
<p>
Addresses in a policy can be either an IP address (e.g., <i>123.45.67.8</i>), 
an IP address and mask (e.g., <i>123.45.0.0/16</i>), or a "*". If a "*" is 
specified, it means "match all addresses."
</p>

<h4>Ports</h4>
<p>
Each policy has a port or a range of ports associated with it. Valid port 
numbers range from 1 to 65535, or you can specify a "*" to indicate "all ports".
</p>

<h4>Examples</h4>
<p>
Here are a few examples of valid exit policy lines and a description of what
they do:
<ul>
  <li><b>reject 123.45.67.8:*</b> - 
    Tor will <i>reject</i> all connections from Tor clients that want to connect 
    from your server to any port at <i>123.45.67.8</i>.
  </li>
  <li><b>accept *:80</b> -
    Tor will <i>accept</i> connections from Tor clients that want to connect 
    from your server to port 80 at any IP address.
  </li>
  <li><b>reject *:135-139</b> -
    Tor will <i>reject</i> connections from Tor clients that want to connect 
    from your server to ports 135 to 139 at any IP address.
  </li>
  <li><b>reject 128.23.0.0/16:*</b> -
    Tor will <i>reject</i> connections from Tor clients that want to connect 
    from your server to any port at any address from <i>128.23.0.0</i> to 
    <i>128.23.255.255</i>.
  </li>
</ul>
</p>

</html>

