<!--
  $Id$
  
  Vidalia is distributed under the following license:

  Copyright (C) 2006,  Matt Edman, Justin Hipple

  This program is free software; you can redistribute it and/or
  modify it under the terms of the GNU General Public License
  as published by the Free Software Foundation; either version 2
  of the License, or (at your option) any later version.

  This program is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  GNU General Public License for more details.

  You should have received a copy of the GNU General Public License
  along with this program; if not, write to the Free Software
  Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  
  02110-1301, USA.
-->

<html>
<body>

<h1>Palvelimen käyttö</h1>
<hr />

Tor-verkko koostuu vapaaehtoisten jakamasta ylimääräisestä yhteyskaistasta palvelimina (Tor-reitittiminä). Vidalia tarjoaa helpon keinon pystyttää oma palvelin.

<a name="basic"/>
<h3>Yleiset-asetukset</h3>
<p>
Jos on kiinnostusta auttaa Tor-verkon toimintaa ylläpitämällä omaa palvelinta, niin seuraavilla ohjeilla yksinkertaisesti on mahdollista pystyttää oma Tor-palvelin:
</p>
<ol>
  <li>
    Avaa <i>Asetukset-ikkuna</i> valitsemalla <i>Asetukset</i> tehtäväpalkista Vidalian valikosta tai <i>Asetukset</i> järjestelmän valikosta Macintosh-järjestelmissä.
  </li>
  <li>Valitse <i>Palvelin</i>-asetussivu.</li>
  <li>Rastita ruutu <i>Välitä tietoa Tor-verkossa</i>.
  <li>Aseta seuraavat tiedot:
    <ul>
      <li><b>Nimi</b>:
        Nimi, jolla palvelin voidaan tunnistaa Tor-verkossa. Esimerkiksi "MinunVidaliapalvelin".
      </li>
      <li><b>Yhteystiedot</b>:
        Sähköpostiosoitteesi, jolla voidaan ottaa yhteyttä vakavan Tor-tietoturvapäivityksen tai palvelinvian vuoksi. Oman PGP- tai GPG-tunnuksen ja sormenjäljen voi myös sisällyttää.
      </li>
      <li><b>Palvelinportti</b>:
        Portti, jolla palvelimesi vastaanottaa liikennettä käyttäjiltä ja muilta Tor-palvelimilta.
      </li>
      <li><b>Osoite</b>:
        Aseta osoite, jolla muut Tor-palvelimet voivat tavoittaa tietokoneesi Internetin kautta. Jos ei omaa julkista IP-osoitetta tiedä, niin painamalla <i>Nouda osoite</i> Vidalia ottaa yhteyden ulkoiseen sivustoon (esim. <i>http://www.vidalia-project.net/iptest/ip.php</i>) selvittääkseen oman julkisen IP-osoitteen.
      </li>
    </ul>
  <li>
    Jos haluat välittää listaa verkossa olevista Tor-palvelimista, niin rastita ruutu <i>Välitä Tor-palvelinlistaa</i>.
     Jos on yhteys on hidas, niin ei välttämättä ole kannatavaa rastittaa. Jos haluaa välittää listaa Tor-palvelimista, niin varmista <i>lista-portin</i> olevan eri kuin <i>palvelinportti</i>.
  </li>
  <li>
    Tor-verkosta reitittimesi kautta poistuvassa liikenteessä näkyy IP-osoitteesi. Paitsi, jos rastittaa ruudun <i>Salli yhteyksiä vain muihin Tor-palvelimiin</i>, jolloin reititin toimii <i>välikätenä</i> eli <i>poistumattomana</i>reitittimenä. Käyttäjät ja palvelimet voivat ottaa yhteyden palvelimeesi, mutta palvelimesi muodostaa yhteyden vain toisiin Tor-palvelimiin.
  </li>
</ol>

<a name="bandwidth"/>
<h3>Nopeudenrajoittaminen</h3>
<p>
Tor-palvelimen ylläpito kuluttaa paljon yhteyskaistaa, jonka vuoksi Tor sallii käytettävän yhteyskaistanmäärän Tor-palvelimille rajoittamisen. Palvelinta voi pitää päällä samalla kun yhteyttä käytetään muihin tarkoituksiin.
</p>
<p>
<i>Keskimääräinennopeus</i> on suurin pitkäaikainenkeskimääräinen sallittu nopeus (kilotavua sekunnissa). Esimerkiksi kannattavaa on asettaa 2 megabittiä sekunnissa (2048 kt/s) tai 50 kilotavua sekunnissa (tyypillinen laajakaistayhteyden nopeus). Tor tarvitsee vähintään 20 kilotavua sekunnissa toimiakseen palvelimena.
</p>
<p>
The <i>maximum rate</i> is a pool of bytes used to fulfill requests during
short periods of traffic higher than your specified <i>average rate</i>, but
still maintains the average over a long period. A low average rate but a high
maximum rate enforces a long-term average while still allowing more traffic
during peak times if the average hasn't been reached lately. Jos kerkimääräinennopeus on sama kuin <i>enimmäisnopeus</i> Tor ei ylitä määriteltyä nopeutta. <i>Enimmäisnopeutesi</i> täytyy olla yhtä suuri tai suurempi kuin <i>keskimääräinen nopeus</i>.
</p>
<p>
Tärkeää on huomioida, että Tor laskee liikkuvan tiedon <b>tavuina</b> eikä bitteinä. Myös, Tor rajottaa vain tulevaa liikennettä lähettävän sijasta. Esimerkiksi, jos oma palvelin välittää listaa Tor-palvelimista silloin lähetetään enemmän tietoa kuin vastaanotetaan. Jos tämä rasittaa liikaa yhteyttä, niin kannattaa poistaa rasti <i>Välitä Tor-palvelinlistaa</i>.
</p>

<a name="exitpolicy"/>
<h3>Poistumiskäytännöt</h3>
<p>
Poistumiskäytännöillä määritellään millaista liikennettä sallitaan poistuvan oman Tor-palvelimen kautta. Tor käyttää oletuksena poistumiskäytäntölistaa, joka rajoittaa erilaisten palvelujen käyttöä kuten sähköpostia, estääkseen spammin tekoa, ja oletus tiedostonjakoportteja estääksen hyväksikäyttämästä Tor-verkkoa. <i>Huomaa:</i> Jos toimii <i>välikätenä</i>, niin ei tarvitse huomioida poistumiskäytäntöjä, sillä siinä tapauksessa liikennettä ei poisteta oman palvelimen kautta.
</p>

<p>
Poistumiskäytännöt koostuvat yhdestä tai useammasta säännöstä, jotka ilmaisevat Tor-verkosta poistuville yhteyksille toimeenpiteen käytännön mukaisille osoitteille tai porteille. 
</p>

<p>Tor käsittelee 
Käytäntöjä ylhäältä alaspäin. Kaikki käytännöt, jotka asetetaan ylös alkuun ovat Tor:in oletus poistumiskäytäntö-listassa. Koska käytäntöjä käsitellään ylhäältä alas, niin listan järjestyksellä on merkistystä. Ylös- ja alas-nuolinäppäimmillä voi vaihtaa käytäntöjen järjestystä.
</p>

<h4>Toimenpiteet</h4>
<p>
Jokaisen poistumiskäytännöllä on määritelty toimenpide, joita on:
<ul>
  <li><b>estä</b> (engl. reject): Tämän kaltaisten käytäntöjen yhteydet <i>estetään</i>.</li>
  <li><b>salli</b> (engl. accept): Tämän kaltaisten käytäntöjen yhteydet <i>sallitaan</i>.</li>
</ul>
</p>

<h4>Osoite</h4>
<p>
Käytännöissä olevat osoitteet voivat olla joko pelkästään IP-osoitteita (esim. 123.45.67.8), IP-osoite sekä verkkopeite (esim. <i>123.45.0.0/16</i>) tai "*". Jos on määritelty "*" tarkoittaen jokaista osoitetta.
</p>

<h4>Portit</h4>
<p>
Jokainen käytäntö määritellään portille tai porteille joita kohtaan se koskee. Hyväksyttävät portit ovat väliltä 1-65535 tai "*"-merkillä voi määrittää kaikki portit.
</p>

<h4>Esimerkkejä</h4>
<p>
Esimerkkejä sopivista poistumiskäytännöistä ja selitys niiden toiminnasta:
<ul>
  <li><b>estä 123.45.67.8:*</b> - 
    Tor <i>estää</i> kaikki yhteydet Tor-käyttäjiltä, jotka haluvat muodostaa yhteyden oman palvelimen kautta mihin tahansa porttiin IP-osoitteessa <i>123.45.67.8</i>.
  </li>
  <li><b>salli *:80</b> -
    Tor <i>sallii</i> yhteydet  Tor-käyttäjiltä, jotka haluvat muodostaa yhteyden palvelimen kautta porttiin 80 mistä tahansa IP-osoitteessa.
  </li>
  <li><b>estä *:135-139</b> -
    Tor <i>estää</i> yhteydet Tor-käyttäjiltä, jotka haluvat muodostaa yhteyden palvelimen porttien 135-139 kautta mistä tahansa IP-osoitteesta.
  </li>
  <li><b>estä 128.23.0.0/16:*</b> -
    Tor <i>estää</i> yhteydet Tor-käyttjiltä, jotka haluvat muodostaa yhteyden palvelimen kautta IP-osoitteista  <i>128.23.0.0</i> - 
    <i>128.23.255.255</i>.
  </li>
</ul>
</p>

</html>

